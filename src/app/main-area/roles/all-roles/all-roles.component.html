<!-- loader -->
@if(isLoading)
{
<div class="loader-overlay">
  <div class="spinner"></div>
</div>
}

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-12">
      <div class="iq-card">
        <div class="iq-card-header d-flex justify-content-between">
          <div class="iq-header-title">
            <h4 class="card-title">All Roles</h4>
          </div>
        </div>
        <div class="iq-card-body">
          @if (pagedRoles)
          {
          <div class="table-responsive">
            <div class="row justify-content-between">
              <div class="col-sm-12 col-md-6">
                <div id="user_list_datatable_info" class="dataTables_filter">
                  <form class="mr-3 position-relative">
                    <div class="form-group mb-0">
                      <input type="search" class="form-control" id="exampleInputSearch" placeholder="Search"
                        autocomplete="off" aria-controls="user-list-table" name="search" [(ngModel)]="searchPhrase"
                        (keydown.enter)="searchRole()">
                      @if (searchPhrase.length > 1)
                      {
                      <small>press enter to start search</small>
                      }
                    </div>
                  </form>
                </div>
              </div>
              <div class="col-sm-12 col-md-6">
                <div class="user-list-files d-flex float-right">
                  <a class="iq-bg-primary">
                    Print
                  </a>
                  <a class="iq-bg-primary">
                    Excel
                  </a>
                  <a class="iq-bg-primary">
                    Pdf
                  </a>
                </div>
              </div>
            </div>
            <table id="user-list-table" class="table table-striped table-bordered mt-4" role="grid"
              aria-describedby="user-list-page-info">
              <thead>
                <tr>
                  <th>S/N</th>
                  <th>Role Title</th>
                  <th>Type</th>
                  <th>Level</th>
                  <th>Location</th>
                  <th>Status</th>
                  <th>Date Created</th>
                  <th>Deadline</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                @for (role of pagedRoles.items; track $index)
                {
                <tr>
                  <td class="text-center">
                    {{ ((pagingParams.size * (pagedRoles.currentPage - 1)) + $index) + 1 }}
                  </td>
                  <td>{{ role.title }}</td>
                  <td>{{ role.type }}</td>
                  <td>{{ role.level }}</td>
                  <td>{{ role.location }}</td>
                  <td><app-role-status-badge [status]="role.status"></app-role-status-badge></td>
                  <td>{{ role.dateCreated | date }}</td>
                  <td>{{ role.deadLine | date }}</td>
                  <td>
                    <div class="flex align-items-center list-user-action">
                      <a class="iq-bg-primary-light" data-toggle="tooltip" data-placement="top" title=""
                        data-original-title="Details"><i class="ri-information-line"></i></a>
                      <a class="iq-bg-primary-ligh" data-toggle="tooltip" data-placement="top" title=""
                        data-original-title="Applicants"><i class="ri-group-line"></i></a>
                      <!-- <a class="iq-bg-primary" data-toggle="tooltip" data-placement="top" title=""
                        data-original-title="Delete" href="#"><i class="ri-delete-bin-line"></i></a> -->
                    </div>
                  </td>
                </tr>
                }
              </tbody>
            </table>
          </div>
          <div class="row justify-content-between mt-3">
            <div id="user-list-page-info" class="col-md-6">
              <span>
                Showing
                {{ ((pagedRoles.currentPage - 1) * pagingParams.size) + 1 }} to
                {{ (pagedRoles.currentPage * pagingParams.size > pagedRoles.itemCount) ? pagedRoles.itemCount :
                ((pagedRoles.currentPage) * pagingParams.size)}}
                of {{ pagedRoles.itemCount }} entries</span>
            </div>
            <div class="col-md-6">
              <nav aria-label="Page navigation example">
                <ul class="pagination justify-content-end mb-0">
                  <li class="page-item pointer"
                    [ngClass]="(!pagedRoles.hasPrevious) ? 'disabled disabled-pointer' : ''">
                    <a class="page-link" (click)="updatePage(pagedRoles.currentPage - 1)" tabindex="-1"
                      aria-disabled="true">Previous</a>
                  </li>
                  @for(page of pageRange; track $index)
                  {
                  <li class="page-item pointer" [ngClass]="((page + 1) === pagedRoles.currentPage) ? 'active' : ''">
                    <a class="page-link" (click)="updatePage(page + 1)">{{ page + 1 }}</a>
                  </li>
                  }
                  <li class="page-item pointer" [ngClass]="(!pagedRoles.hasNext) ? 'disabled' : ''">
                    <a class="page-link" (click)="updatePage(pagedRoles.currentPage + 1)">Next</a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>